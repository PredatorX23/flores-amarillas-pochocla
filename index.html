<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Día de las Manzanillas — Un detalle meme</title>
  <style>
    :root{
      --bg:#fdfcf9;
      --accent:#fffacd; /* color manzanilla */
      --accent-2:#fffa9d;
      --card:#ffffffdd;
      --text:#2b2b2b;
      --muted:#6b6b6b;
      --radius:20px;
      font-family: 'Comic Sans MS', cursive, sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%;width:100%}
    html{overflow-x:hidden}
    body{
      margin:0;
      padding:0;
      background: radial-gradient(circle at 10% 10%, #fffef5 0%, var(--bg) 30%), linear-gradient(180deg,#fffef9 0%, #fdfcf9 100%);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:100vh;
      padding:20px;
      overflow-x:auto;
      overflow-y:auto;
    }

    /* Campo de manzanillas */
    body::before{
      content:"🌼🌼🌼🌼🌼🌼🌼🌼🌼🌼";
      position:absolute;
      top:10%;
      left:0;
      width:100%;
      font-size:clamp(16px, 4vw, 24px);
      opacity:0.15;
      text-align:center;
      animation: floatBg 12s linear infinite alternate;
      overflow:hidden;
    }
    @keyframes floatBg {
      from{transform:translateY(0)}
      to{transform:translateY(-40px)}
    }

    .scene{
      width:min(900px,90vw);
      max-width:900px;
      display:grid;
      grid-template-columns: 1fr 380px;
      gap:24px;
      align-items:center;
      position:relative;
      z-index:10;
      margin:0 auto;
    }

    .card{
      background:var(--card);
      border-radius:var(--radius);
      padding:clamp(16px, 5vw, 28px);
      box-shadow: 0 10px 30px rgba(20,20,20,0.08);
      text-align:center;
    }

    h1{
      margin:0 0 8px;
      font-size:clamp(20px, 4vw, 26px);
      animation: glow 2s ease-in-out infinite alternate;
      line-height:1.2;
    }
    @keyframes glow {
      from { text-shadow: 0 0 5px #fffacd, 0 0 10px #fffa9d; }
      to   { text-shadow: 0 0 20px #fff97c, 0 0 30px #ffd700; }
    }

    h2{margin:0 0 14px;font-size:clamp(14px, 3vw, 17px);color:var(--muted)}

    .message{
      font-size:clamp(14px, 3.5vw, 18px);line-height:1.5;color:var(--text);
      padding:clamp(12px, 3vw, 14px);border-radius:12px;margin:18px 0;min-height:clamp(80px, 15vw, 100px);display:flex;align-items:center;justify-content:center;text-align:center;
      background: #fffacd44;
    }

    .typewriter{
      border-right: 2px solid #fffa9d;
      white-space: nowrap;
      overflow: hidden;
      display:inline-block;
      animation: typing 5s steps(50,end) forwards, blink .7s infinite;
    }
    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }
    @keyframes blink {
      50% { border-color: transparent }
    }

    #hiddenMessage {
      display:none;
      margin-top:16px;
      font-size:18px;
      background:#fff0c2;
      padding:14px;
      border-radius:12px;
      animation: fadeIn 2s ease forwards;
    }

    @keyframes fadeIn {
      0%{opacity:0;transform:translateY(20px)}
      100%{opacity:1;transform:translateY(0)}
    }

    button{
      cursor:pointer;
      border:0;
      padding:clamp(8px, 2.5vw, 10px) clamp(12px, 3.5vw, 14px);
      border-radius:12px;
      font-weight:600;
      margin:clamp(4px, 1.5vw, 6px);
      font-size:clamp(12px, 2.8vw, 14px);
      min-height:44px; /* Tamaño mínimo recomendado para touch */
      min-width:44px;
      touch-action: manipulation; /* Mejora respuesta táctil */
    }
    .btn-primary{background:linear-gradient(180deg,var(--accent),var(--accent-2));color:#2a1700}
    .btn-ghost{background:transparent;border:1px solid rgba(0,0,0,0.08)}

    .visual{position:relative;display:flex;align-items:center;justify-content:center;min-height:380px;}

    .meme-flower{
      width:clamp(60px, 12vw, 80px);
      height:clamp(60px, 12vw, 80px);
      border-radius:50%;
      background:radial-gradient(circle at 30% 30%, #fff 0%, #ffe 50%, var(--accent) 100%);
      position:absolute;animation:spin 8s linear infinite;
    }
    .meme-flower::after{
      content:"🌼";
      font-size:clamp(30px, 8vw, 46px);
      position:absolute;
      top:50%;left:50%;
      transform:translate(-50%,-50%);
    }
    .meme-flower.smile::after{
      content:"😆🌼";
    }

    @keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}

    .floating{
      animation:floating 3s ease-in-out infinite;
    }
    @keyframes floating{0%{transform:translateY(0)}50%{transform:translateY(-15px)}100%{transform:translateY(0)}}

    .meta{font-size:13px;color:var(--muted);margin-top:12px;text-align:center}

    /* Corazones flotando */
    .heart{
      position:fixed;
      bottom:20px;
      font-size:24px;
      animation: rise 3s ease forwards;
    }
    @keyframes rise{
      from{transform:translateY(0);opacity:1}
      to{transform:translateY(-300px);opacity:0}
    }

    /* Tablets */
    @media (max-width:820px){
      .scene{
        grid-template-columns:1fr;
        width:95vw;
        max-width:none;
        gap:16px;
      }
      .visual{order:-1;height:clamp(250px, 40vw, 300px)}
      
      .card{
        padding:clamp(16px, 4vw, 24px);
      }
      
      .meme-flower{
        width:clamp(50px, 10vw, 70px);
        height:clamp(50px, 10vw, 70px);
      }
    }
    
    /* Móviles */
    @media (max-width:480px){
      body{
        padding:10px;
      }
      
      .scene{
        width:100%;
        gap:12px;
      }
      
      .card{
        padding:16px;
        border-radius:16px;
      }
      
      .visual{
        height:200px;
      }
      
      .message{
        margin:12px 0;
        padding:12px;
        min-height:60px;
      }
      
      .typewriter{
        white-space:normal; /* Permite que el texto se ajuste */
        border-right:none;
        animation:none;
      }
      
      button{
        font-size:12px;
        padding:8px 12px;
        margin:3px;
        min-height:40px;
      }
      
      .meme-flower{
        width:50px;
        height:50px;
      }
      .meme-flower::after{
        font-size:24px;
      }
      
      #hiddenMessage{
        font-size:14px;
        padding:12px;
      }
    }
    
    /* Móviles muy pequeños */
    @media (max-width:320px){
      .card{
        padding:12px;
      }
      
      h1{
        font-size:18px;
      }
      
      h2{
        font-size:13px;
      }
      
      .message{
        font-size:13px;
        padding:10px;
      }
      
      button{
        font-size:11px;
        padding:6px 10px;
        margin:2px;
      }
    }
  </style>
</head>
<body>
  <div class="scene">
    <div class="card">
      <h1>Para ti, Pochocla (Mi token)</h1>
      <h2>Que vivan las manzanillas!</h2>

      <div id="message" class="message">
        <span class="typewriter">Querida Pochocla, 🌼 Sé que debería regalarte flores amarillas,
        pero como buen meme-man te traje manzanillas.
        Porque contigo hasta las bromas florecen.
        Con cariño, Jhoe 💛</span>
      </div>

      <div>
        <button class="btn-primary" onclick="showHiddenMessage()">🌼 Sorpresa Meme</button>
        <button class="btn-ghost" onclick="toggleSpin()">Girar manzanillas</button>
        <button class="btn-ghost" id="musicBtn" onclick="toggleMusic()">🎵 Reproducir Música</button>
        <button class="btn-ghost" onclick="throwHearts()">💛 Corazones</button>
        <button class="btn-ghost" onclick="rainPetals()">🌼 Lluvia de pétalos</button>
      </div>

      <div id="musicControls" style="display:none; margin-top:16px; text-align:center;">
        <button class="btn-ghost" onclick="changeVolume(-0.1)">🔉 -</button>
        <span id="volumeDisplay" style="margin:0 10px;">Vol: 70%</span>
        <button class="btn-ghost" onclick="changeVolume(0.1)">🔊 +</button>
      </div>

      <div id="hiddenMessage">💌 Pochocla, eres mi razón favorita para sonreír todos los días.  
      Gracias por ser mi token, mi compañía y mi alegría.  
      Con amor, Jhoe 💛</div>

      <div class="meta">Hecho con humor y mucho amor 💛</div>
    </div>

    <div class="visual">
      <div class="meme-flower floating" style="top:20%;left:20%" onclick="toggleSmile(this)"></div>
      <div class="meme-flower floating" style="top:60%;left:60%" onclick="toggleSmile(this)"></div>
      <div class="meme-flower floating" style="top:30%;left:70%" onclick="toggleSmile(this)"></div>
      <div class="meme-flower floating" style="top:70%;left:30%" onclick="toggleSmile(this)"></div>
    </div>
  </div>

  <!-- Reproductor de audio MP3 -->
  <audio id="musicPlayer" loop preload="auto">
    <source src="flores-amarillas.mp3" type="audio/mpeg">
    <source src="flores-amarillas.wav" type="audio/wav">
    Tu navegador no soporta el elemento de audio.
  </audio>

  <script>
    // Inicializar reproductor de música
    let musicPlayer = document.getElementById("musicPlayer");
    let musicBtn = document.getElementById("musicBtn");
    let isPlaying = false;
    
    // Configurar volumen inicial
    musicPlayer.volume = 0.7;
    
    function toggleMusic(){
      if(isPlaying){
        musicPlayer.pause();
        musicBtn.innerHTML = "🎵 Reproducir Música";
        document.getElementById("musicControls").style.display = "none";
        isPlaying = false;
      } else {
        musicPlayer.play().then(() => {
          musicBtn.innerHTML = "⏸️ Pausar Música";
          document.getElementById("musicControls").style.display = "block";
          isPlaying = true;
        }).catch((error) => {
          alert("Por favor, agrega el archivo 'flores-amarillas.mp3' en la misma carpeta que este archivo HTML");
          console.error("Error al reproducir:", error);
        });
      }
    }
    
    function changeVolume(change){
      let newVolume = Math.max(0, Math.min(1, musicPlayer.volume + change));
      musicPlayer.volume = newVolume;
      document.getElementById("volumeDisplay").innerText = "Vol: " + Math.round(newVolume * 100) + "%";
    }

    function toggleSpin(){
      document.querySelectorAll('.meme-flower').forEach(f=>{
        if(f.style.animationPlayState==='paused'){
          f.style.animationPlayState='running';
        }else{
          f.style.animationPlayState='paused';
        }
      });
    }

    function showHiddenMessage(){
      document.getElementById("hiddenMessage").style.display="block";
    }

    // Función antigua mantenida por compatibilidad
    function unmuteMusic(){
      toggleMusic();
    }

    // Corazones flotando
    function throwHearts(){
      for(let i=0;i<8;i++){
        let heart=document.createElement("div");
        heart.className="heart";
        heart.style.left=(Math.random()*90)+"vw";
        heart.innerText="💛";
        document.body.appendChild(heart);
        setTimeout(()=>heart.remove(),3000);
      }
    }

    // Lluvia de pétalos
    function rainPetals(){
      for(let i=0;i<20;i++){
        let petal=document.createElement("div");
        petal.innerText="🌼";
        petal.style.position="fixed";
        petal.style.top="-20px";
        petal.style.left=Math.random()*100+"vw";
        petal.style.fontSize="24px";
        petal.style.animation=`fall ${3+Math.random()*3}s linear forwards`;
        document.body.appendChild(petal);
        setTimeout(()=>petal.remove(),6000);
      }
    }
    const style=document.createElement("style");
    style.innerHTML=`@keyframes fall{to{transform:translateY(100vh);opacity:0}}`;
    document.head.appendChild(style);

    // Minijuego: sonrisa en las flores
    function toggleSmile(el){
      el.classList.toggle("smile");
    }
  </script>
</body>
</html>
